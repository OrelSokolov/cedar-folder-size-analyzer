# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: CI/CD –∏ —Ä–µ–ª–∏–∑—ã

–ö—Ä–∞—Ç–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é GitLab CI/CD –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏ —Ä–µ–ª–∏–∑–æ–≤.

## ‚ö° –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```powershell
# –°–æ–∑–¥–∞—Ç—å —Ä–µ–ª–∏–∑ –≤–µ—Ä—Å–∏–∏ 0.2.0
.\scripts\create-release.ps1 -Version 0.2.0

# –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä (–±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏)
.\scripts\create-release.ps1 -Version 0.2.0 -DryRun

# –° –∫–∞—Å—Ç–æ–º–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
.\scripts\create-release.ps1 -Version 0.2.0 -Message "Added awesome features"
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç –≤–µ—Ä—Å–∏—é –≤ `Cargo.toml`
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç `CHANGELOG.md`
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –∫–æ–º–º–∏—Ç
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç git —Ç–µ–≥
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç –≤ GitLab

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í—Ä—É—á–Ω—É—é

```bash
# 1. –û–±–Ω–æ–≤–∏—Ç–µ –≤–µ—Ä—Å–∏—é –≤ Cargo.toml
# version = "0.2.0"

# 2. –û–±–Ω–æ–≤–∏—Ç–µ CHANGELOG.md

# 3. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–º–∏—Ç
git add Cargo.toml CHANGELOG.md
git commit -m "Release version 0.2.0"

# 4. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ–≥
git tag -a v0.2.0 -m "Release v0.2.0"

# 5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ GitLab
git push origin master
git push origin v0.2.0
```

## üì¶ –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ–≥–∞ GitLab CI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–°–æ–±–µ—Ä—ë—Ç –ø—Ä–æ–µ–∫—Ç** (`cargo build --release`)
2. **–°–æ–∑–¥–∞—Å—Ç ZIP –∞—Ä—Ö–∏–≤** —Å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º —Ñ–∞–π–ª–æ–º
3. **–°–æ–±–µ—Ä—ë—Ç MSI —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫** —á–µ—Ä–µ–∑ WiX Toolset
4. **–°–æ–∑–¥–∞—Å—Ç GitLab Release** —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
5. **–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã** –∫ —Ä–µ–ª–∏–∑—É:
   - `cedar-folder-size-analyzer-<version>-x86_64.msi`
   - `cedar-folder-size-analyzer-<version>-x86_64.zip`
   - `cedar-folder-size-analyzer.exe`

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–±–æ—Ä–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å pipeline

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ GitLab: **CI/CD ‚Üí Pipelines**
2. –ù–∞–π–¥–∏—Ç–µ pipeline –¥–ª—è –≤–∞—à–µ–≥–æ —Ç–µ–≥–∞
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ pipeline –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–ª–∏–∑

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Releases**
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à —Ä–µ–ª–∏–∑
3. –°–∫–∞—á–∞–π—Ç–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)

### 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ GitLab Runner

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ [.gitlab/runner-setup.md](.gitlab/runner-setup.md)

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Windows Runner —Å —Ç–µ–≥–æ–º `windows`
- PowerShell
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–æ—Å—Ç—É–ø (–¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è Rust)

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–§–∞–π–ª `.gitlab-ci.yml` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

**–û—Å–Ω–æ–≤–Ω—ã–µ jobs:**
- `build:windows` - –°–±–æ—Ä–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (–¥–ª—è –≤—Å–µ—Ö –∫–æ–º–º–∏—Ç–æ–≤)
- `release:gitlab` - –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–≥–æ–≤)
- `lint:check` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üìã Semantic Versioning

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:

| –í–µ—Ä—Å–∏—è | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å | –ü—Ä–∏–º–µ—Ä |
|--------|-------------------|--------|
| **MAJOR** (1.0.0) | –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è | 0.9.5 ‚Üí 1.0.0 |
| **MINOR** (0.1.0) | –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ) | 0.1.5 ‚Üí 0.2.0 |
| **PATCH** (0.0.1) | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ | 0.1.0 ‚Üí 0.1.1 |

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑
v0.1.0

# –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
v0.2.0

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥
v0.2.1

# –ü–µ—Ä–≤–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
v1.0.0
```

## üéØ Workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –û–±—ã—á–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
git checkout -b feature/awesome-feature

# 2. –†–∞–∑—Ä–∞–±–æ—Ç–∞–π—Ç–µ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ
# ... –∫–æ–¥ ...

# 3. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "Add awesome feature"

# 4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ GitLab
git push origin feature/awesome-feature

# 5. –°–æ–∑–¥–∞–π—Ç–µ Merge Request –≤ GitLab
# CI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç –∫–æ–¥ (lint:check)

# 6. –ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è - —Å–ª–µ–π—Ç–µ –≤ master
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞

```bash
# 1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã –Ω–∞ master
git checkout master
git pull origin master

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–∞
.\scripts\create-release.ps1 -Version 0.3.0

# 3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É
# GitLab CI —Å–¥–µ–ª–∞–µ—Ç –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ!
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Pipeline –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- GitLab Runner –∞–∫—Ç–∏–≤–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –¢–µ–≥ `windows` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ runner
- –§–∞–π–ª `.gitlab-ci.yml` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
```powershell
# –ù–∞ Windows Runner –º–∞—à–∏–Ω–µ
cd C:\GitLab-Runner
.\gitlab-runner.exe verify
.\gitlab-runner.exe restart
```

### –°–±–æ—Ä–∫–∞ Rust –Ω–µ —É–¥–∞—ë—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** Rust –Ω–µ –Ω–∞–π–¥–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:** CI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç Rust. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É runner –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.

### WiX —Å–±–æ—Ä–∫–∞ –Ω–µ —É–¥–∞—ë—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** WiX tools –Ω–µ –Ω–∞–π–¥–µ–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–∞–ø–∫–∞ `wix-tools/` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ –Ω–µ –∏—Å–∫–ª—é—á–µ–Ω–∞ `.gitignore`

### –¢–µ–≥ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å —Å–æ–∑–¥–∞—Ç—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–µ–≥

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–¥–∞–ª–∏—Ç–µ —Ç–µ–≥ –ª–æ–∫–∞–ª—å–Ω–æ
git tag -d v0.2.0

# –£–¥–∞–ª–∏—Ç–µ —Ç–µ–≥ —É–¥–∞–ª—ë–Ω–Ω–æ (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
git push origin --delete v0.2.0

# –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ–≥ –∑–∞–Ω–æ–≤–æ
git tag -a v0.2.0 -m "Release v0.2.0"
git push origin v0.2.0
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [.gitlab-ci.yml](.gitlab-ci.yml) - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CI/CD
- [GITLAB_CI.md](GITLAB_CI.md) - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è CI/CD
- [.gitlab/runner-setup.md](.gitlab/runner-setup.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Runner
- [CHANGELOG.md](CHANGELOG.md) - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ç–µ–≥–∏
git tag -l

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–ª–∏–∑—ã
git tag -l --sort=-v:refname | head -5

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏
git log v0.1.0..v0.2.0 --oneline

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–≥–µ
git show v0.2.0

# –°–æ–∑–¥–∞—Ç—å pre-release (alpha/beta/rc)
git tag -a v0.3.0-beta.1 -m "Beta release"
git push origin v0.3.0-beta.1
```

## ‚úÖ Checklist –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —à–∞–±–ª–æ–Ω issue –¥–ª—è —Ä–µ–ª–∏–∑–∞:

1. –í GitLab —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Issue
2. –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω "release"
3. –°–ª–µ–¥—É–π—Ç–µ —á–µ–∫–ª–∏—Å—Ç—É

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:

- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] `CHANGELOG.md` –∞–∫—Ç—É–∞–ª–µ–Ω
- [ ] –í–µ—Ä—Å–∏—è –≤ `Cargo.toml` –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –ö–æ–¥ –ø—Ä–æ—à—ë–ª review
- [ ] –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] MSI —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–µ–ª–∏–∑—ã –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```powershell
.\scripts\create-release.ps1 -Version 0.2.0
```

GitLab CI –ø–æ–∑–∞–±–æ—Ç–∏—Ç—Å—è –æ–±–æ –≤—Å—ë–º –æ—Å—Ç–∞–ª—å–Ω–æ–º! üöÄ

