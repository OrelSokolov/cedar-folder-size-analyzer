# GitHub Actions –¥–ª—è Cedar Folder Size Analyzer

## üìã –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–±–æ—Ä–∫—É —Ä–µ–ª–∏–∑–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–µ–≥–æ–≤ –≤ GitHub.

## üöÄ –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Ä–µ–ª–∏–∑

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–µ–ª–∏–∑—É

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–¥ –≥–æ—Ç–æ–≤ –∫ —Ä–µ–ª–∏–∑—É:
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
- –û–±–Ω–æ–≤–ª–µ–Ω `CHANGELOG.md` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è –≤ `Cargo.toml`

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ–≥ —Å –≤–µ—Ä—Å–∏–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, v0.1.0)
git tag -a v0.1.0 -m "Release version 0.1.0"

# –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–≥ –≤ GitHub
git push origin v0.1.0
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞

–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ–≥–∞ GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. ‚úÖ –°–æ–±–µ—Ä—ë—Ç —Ä–µ–ª–∏–∑–Ω—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. ‚úÖ –°–æ–∑–¥–∞—Å—Ç ZIP –∞—Ä—Ö–∏–≤ —Å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º —Ñ–∞–π–ª–æ–º
3. ‚úÖ –°–æ–±–µ—Ä—ë—Ç MSI —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ —á–µ—Ä–µ–∑ WiX
4. ‚úÖ –°–æ–∑–¥–∞—Å—Ç GitHub Release —Å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏
5. ‚úÖ –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –∫ —Ä–µ–ª–∏–∑—É

### 4. –†–µ–∑—É–ª—å—Ç–∞—Ç

–í —Ä–∞–∑–¥–µ–ª–µ **Releases** –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ø–æ—è–≤–∏—Ç—Å—è –Ω–æ–≤—ã–π —Ä–µ–ª–∏–∑ —Å —Ñ–∞–π–ª–∞–º–∏:
- `cedar-folder-size-analyzer-<version>-x86_64.msi` - MSI —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫
- `cedar-folder-size-analyzer-<version>-x86_64-windows.zip` - ZIP –∞—Ä—Ö–∏–≤ —Å EXE
- `cedar-folder-size-analyzer.exe` - –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ GitHub Actions

### Workflows

#### 1. `release.yml` - –°–±–æ—Ä–∫–∞ —Ä–µ–ª–∏–∑–æ–≤
**–¢—Ä–∏–≥–≥–µ—Ä:** Push —Ç–µ–≥–∞ –≤–∏–¥–∞ `v*.*.*`

**Jobs:**
- `build-windows` - –°–±–æ—Ä–∫–∞ —Ä–µ–ª–∏–∑–Ω–æ–π –≤–µ—Ä—Å–∏–∏
  1. Checkout –∫–æ–¥–∞
  2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Rust toolchain
  3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Cargo
  4. –°–±–æ—Ä–∫–∞: `cargo build --release`
  5. –°–æ–∑–¥–∞–Ω–∏–µ ZIP –∞—Ä—Ö–∏–≤–∞
  6. –°–±–æ—Ä–∫–∞ MSI —á–µ—Ä–µ–∑ WiX
  7. –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
  8. –°–æ–∑–¥–∞–Ω–∏–µ GitHub Release

#### 2. `build.yml` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏
**–¢—Ä–∏–≥–≥–µ—Ä:** Push –≤ master/main –∏–ª–∏ Pull Request

**Jobs:**
- `build` - –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `clippy` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
- `format` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

–í—Å–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–∫—Ä–µ–ø–ª—è—é—Ç—Å—è –∫ —Ä–µ–ª–∏–∑—É:
- –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª `.exe`
- ZIP –∞—Ä—Ö–∏–≤
- MSI —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫

## üìù –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### GitHub Secrets

–ù–∏–∫–∞–∫–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ secrets –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è! GitHub –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç `GITHUB_TOKEN`.

### WiX Toolset

WiX tools –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤ –ø–∞–ø–∫–µ `wix-tools/`.
–û–Ω–∏ —É–∂–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç.

## üîç –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ GitHub Actions:
- `~/.cargo/bin/` - Cargo binaries
- `~/.cargo/registry/` - Cargo registry
- `~/.cargo/git/` - Git –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `target/` - –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

–ö—ç—à —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ö–µ—à–∞ `Cargo.lock`.

## üõ†Ô∏è –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Ç–µ–≥–∞ –º–æ–∂–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É:

```powershell
# –°–±–æ—Ä–∫–∞ —Ä–µ–ª–∏–∑–Ω–æ–π –≤–µ—Ä—Å–∏–∏
cargo build --release

# –°–æ–∑–¥–∞–Ω–∏–µ MSI
.\wix-tools\candle.exe -nologo -arch x64 -ext WixUIExtension wix\main.wxs `
  "-dCargoTargetBinDir=target\release" `
  "-dVersion=0.1.0" `
  -out target\wix\main.wixobj

.\wix-tools\light.exe -nologo -ext WixUIExtension -ext WixUtilExtension `
  -out target\wix\cedar-folder-size-analyzer-0.1.0-x86_64.msi `
  target\wix\main.wixobj
```

## üêõ –û—Ç–ª–∞–¥–∫–∞ GitHub Actions

–ï—Å–ª–∏ workflow –Ω–µ —É–¥–∞–ª—Å—è:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Actions** –≤ GitHub
2. –ù–∞–π–¥–∏—Ç–µ –Ω–µ—É–¥–∞–≤—à–∏–π—Å—è workflow
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ job –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —à–∞–≥, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### –°–±–æ—Ä–∫–∞ Rust –Ω–µ —É–¥–∞—ë—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Rust —á–µ—Ä–µ–∑ `dtolnay/rust-toolchain`

#### WiX —Å–±–æ—Ä–∫–∞ –Ω–µ —É–¥–∞—ë—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–∞–ø–∫–∞ `wix-tools/` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

#### Release –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ç–µ–≥ –∏–º–µ–µ—Ç —Ñ–æ—Ä–º–∞—Ç `v*.*.*` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `v0.1.0`)

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ç–µ–≥–∏
git tag -l

# –£–¥–∞–ª–∏—Ç—å —Ç–µ–≥ –ª–æ–∫–∞–ª—å–Ω–æ
git tag -d v0.1.0

# –£–¥–∞–ª–∏—Ç—å —Ç–µ–≥ –Ω–∞ GitHub
git push origin --delete v0.1.0

# –°–æ–∑–¥–∞—Ç—å –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–≥ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
git tag -a v0.1.0 -m "Release v0.1.0

- Feature 1
- Feature 2
- Bug fix 3"

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ —Ç–µ–≥–∏
git push origin --tags
```

## üîÑ Semantic Versioning

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [Semantic Versioning](https://semver.org/lang/ru/):

- **MAJOR** (v1.0.0) - –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è API
- **MINOR** (v0.1.0) - –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (–æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è)
- **PATCH** (v0.0.1) - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫

–ü—Ä–∏–º–µ—Ä—ã:
- `v0.1.0` - –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑
- `v0.2.0` - –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- `v0.2.1` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞
- `v1.0.0` - –ü–µ—Ä–≤–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions

### –í–∫–ª—é—á–µ–Ω–∏–µ GitHub Actions

GitHub Actions –æ–±—ã—á–Ω–æ –≤–∫–ª—é—á–µ–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–∂–Ω–æ:
1. **Settings ‚Üí Actions ‚Üí General**
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã–±—Ä–∞–Ω–æ "Allow all actions and reusable workflows"

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–í **Settings ‚Üí Actions ‚Üí General ‚Üí Workflow permissions**:
- –í—ã–±–µ—Ä–∏—Ç–µ "Read and write permissions"
- –í–∫–ª—é—á–∏—Ç–µ "Allow GitHub Actions to create and approve pull requests"

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å workflow

1. **Actions** –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
2. –ù–∞–π–¥–∏—Ç–µ workflow run –¥–ª—è –≤–∞—à–µ–≥–æ —Ç–µ–≥–∞
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π –∫–∞–∂–¥–æ–≥–æ job

### –°–∫–∞—á–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ workflow run
2. Scroll –≤–Ω–∏–∑ –¥–æ —Å–µ–∫—Ü–∏–∏ "Artifacts"
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

–ò–ª–∏ –∏–∑ Release:
1. **Releases** –≤ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏
2. –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Ä–µ–ª–∏–∑
3. –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª—ã –∏–∑ —Å–µ–∫—Ü–∏–∏ "Assets"

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [Creating Releases](https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository)
- [Workflow Syntax](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions)
- [Cargo Book](https://doc.rust-lang.org/cargo/)
- [WiX Toolset](https://wixtoolset.org/)

## üéØ Best Practices

1. **–í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º**
   ```bash
   cargo test
   cargo build --release
   ```

2. **–û–±–Ω–æ–≤–ª—è–π—Ç–µ CHANGELOG.md**
   - –î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É —Ä–µ–ª–∏–∑–∞

3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Semantic Versioning**
   - MAJOR.MINOR.PATCH
   - –ü—Ä–µ—Ñ–∏–∫—Å `v` –≤ —Ç–µ–≥–∞—Ö

4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã**
   - –°–∫–∞—á–∞–π—Ç–µ MSI –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ EXE –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

5. **–ü–∏—à–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ release notes**
   - –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
   - –î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

